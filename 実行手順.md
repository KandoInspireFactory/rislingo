# アプリケーションの立ち上げ手順 (PC再起動後)

PCを再起動した後、このアプリケーションをローカル環境で立ち上げるための手順です。
PostgreSQLサーバーがWindowsサービスとして実行中であることを前提とします。

---

### ステップ 1: OpenAI APIキーとデータベース接続情報の確認 (初回のみ / 変更時)

`C:\Users\s3792\projects\v4_rislingo-main\backend\.env` ファイルを開き、以下の環境変数が正しく設定されていることを確認してください。

```env
# PostgreSQLのユーザー名 (通常は postgres) と、インストール時に設定したパスワードを設定
DATABASE_URL=postgresql://postgres:あなたのPostgreSQLパスワード@localhost:5432/toefl_speaking_dev

# 取得したOpenAI APIキーを設定 (sk- から始まる文字列)
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

---

### ステップ 2: バックエンドサーバーの起動

1.  新しいPowerShellウィンドウを開きます。
2.  以下のコマンドを順番に実行してください。

    ```powershell
    # バックエンドフォルダへ移動
    cd C:\Users\s3792\projects\v4_rislingo-main\backend

    # 仮想環境を有効化
    .\venv\Scripts\Activate.ps1

    # (オプション) データベースマイグレーションの確認・実行
    # データベースのスキーマ変更があった場合や、データベースが初期状態の場合に実行します。
    # createdb -U postgres toefl_speaking_dev # データベースが未作成の場合のみ実行
    # alembic upgrade head 

    # バックエンドサーバーを起動
    uvicorn main:app --reload --host 0.0.0.0 --port 8000
    ```
    *   バックエンドサーバーが起動すると `INFO: Application startup complete.` のようなメッセージが表示され、待機状態になります。このPowerShellウィンドウは**閉めずに**開いたままにしてください。

---

### ステップ 3: フロントエンドサーバーの起動

1.  **別の** PowerShellウィンドウを開きます。
2.  以下のコマンドを順番に実行してください。

    ```powershell
    # フロントエンドフォルダへ移動
    cd C:\Users\s3792\projects\v4_rislingo-main\frontend

    # 依存関係のインストール (初回起動時や変更があった場合のみ)
    # npm install

    # フロントエンドサーバーを起動
    npm run dev
    ```
    *   フロントエンドサーバーが起動すると `✓ Ready in ...ms` のようなメッセージが表示され、待機状態になります。このPowerShellウィンドウも**閉めずに**開いたままにしてください。

---

### ステップ 4: アプリケーションへのアクセス

1.  お使いのウェブブラウザ（Chrome, Edge, Firefoxなど）を開きます。
2.  アドレスバーに以下のURLを入力して、`Enter` キーを押してください。
    `http://localhost:3000`

これで、アプリケーションの画面が表示されます。

---

### アプリケーションの停止

作業が完了したら、バックエンドとフロントエンドを起動している2つのPowerShellウィンドウでそれぞれ `Ctrl + C` を押してサーバープロセスを停止し、ウィンドウを閉じてください。
